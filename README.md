# –†–∞–±–æ—á–∏–π —Ñ–æ—Ä–∫ SDK2.0 –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –°–î–≠–ö üì¶
[![Packagist](https://img.shields.io/packagist/v/ttatpuot/cdek-sdk2.0)](https://packagist.org/packages/ttatpuot/cdek-sdk2.0)
[![Scrutinizer Code Quality](https://scrutinizer-ci.com/g/TTATPuOT/cdek-sdk2.0/badges/quality-score.png?b=master)](https://scrutinizer-ci.com/g/TTATPuOT/cdek-sdk2.0/?branch=master)
[![Code Coverage](https://scrutinizer-ci.com/g/TTATPuOT/cdek-sdk2.0/badges/coverage.png?b=master)](https://scrutinizer-ci.com/g/TTATPuOT/cdek-sdk2.0/?branch=master)
![License](https://img.shields.io/github/license/ttatpuot/cdek-sdk2.0)

–≠—Ç–æ —Ä–∞–±–æ—á–∏–π –∏ (–ø–æ–∫–∞ —á—Ç–æ) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–∫ [cdek-it/sdk2.0](https://github.com/cdek-it/sdk2.0). –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å [—Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã](https://github.com/TTATPuOT/cdek-sdk2.0/issues).

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PHP 8.0+
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ–ª–∫–∏–µ PHPDoc –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –±–æ–ª–µ–µ –≥—Ä–∞–º–æ—Ç–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ IDE
- –£–ª—É—á—à–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `Client::calculator()` –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ [–ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ç–∞—Ä–∏—Ñ–∞–º](https://api-docs.cdek.ru/63345519.html) –∏ [–ø–æ –∫–æ–¥—É —Ç–∞—Ä–∏—Ñ–∞](https://api-docs.cdek.ru/63345430.html)
- –£–ª—É—á—à–µ–Ω–∞ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/index.md)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–∫–µ—Ç—ã –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  - [–ù–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ –≤ —ç–∫—à–µ–Ω–µ –æ—Ñ–∏—Å–æ–≤ #20](https://github.com/cdek-it/sdk2.0/issues/20)
  - [–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ error—ã —É –∫–ª–∞—Å—Å–∞ ApiReponse #11](https://github.com/cdek-it/sdk2.0/issues/11)

–¢–∞–∫ –∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ —Ñ–æ—Ä–∫, –≤ —Å–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–∞ `ttatpuot/cdek-sdk2.0` –∏ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.

---

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è API v2.0 –¥–ª—è [–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ —Å–ª—É–∂–±–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –°–î–≠–ö](https://www.cdek.ru/clients/integrator.html).
–î–∞–Ω–Ω–∞—è SDK –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –≤–Ω–µ–¥—Ä–∏—Ç—å –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å–ª—É–∂–±–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –°–î–≠–ö.

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SDK:
 
- —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–µ–±—Ö—É–∫–∏ (—Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å—ã –ø–µ—á–∞—Ç–Ω—ã—Ö —Ñ–æ—Ä–º)
- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ –≤–µ–±—Ö—É–∫–∏
- —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≤–µ–±—Ö—É–∫–∏
- –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ü–í–ó
- —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–∑–æ–≤ –∫—É—Ä—å–µ—Ä–∞
- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞—è–≤–∫–µ –Ω–∞ –≤—ã–∑–æ–≤ –∫—É—Ä—å–µ—Ä–∞
- —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–∑–æ–≤ –∫—É—Ä—å–µ—Ä–∞
- —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—á–∞—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã –Ω–∞–∫–ª–∞–¥–Ω–æ–π
- —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—á–∞—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã –®–ö-–º–µ—Å—Ç–∞
- –ø–æ–ª—É—á–µ–Ω–∏–µ c–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
- –ø–æ–ª—É—á–µ–Ω–∏–µ c–ø–∏—Å–∫–∞ —Ä–µ–≥–∏–æ–Ω–æ–≤

–†–∞–±–æ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ API –≤–æ–∑–º–æ–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç—É–ø–æ–≤ –∫ —Å–µ—Ä–≤–∏—Å—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ —Å –∫–æ–º–ø–∞–Ω–∏–µ–π –°–î–≠–ö. 

***
### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã. –ù—É–∂–µ–Ω PHP 7.1/8.0 –∏–ª–∏ –≤—ã—à–µ.

–î–∞–Ω–Ω—ã–π SDK –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é [PSR-18 (HTTP-client)](https://www.php-fig.org/psr/psr-18/). 
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ HTTP-–∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π - –∫–ª–∏–µ–Ω—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –¥–∞–Ω–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é.
–ï—Å–ª–∏ —É –≤–∞—à–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç—Ç–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∏–º–µ—é—â–∏–µ—Å—è –∞–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö HTTP-–∫–ª–∏–µ–Ω—Ç–æ–≤](http://docs.php-http.org/en/latest/clients.html)


***
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ Composer

```bash
composer require ttatpuot/cdek-sdk2.0
```


***
### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

[–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Ç—É—Ç](docs/index.md)


***
### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```php
$client = new Psr18Client();
$cdek = new \CdekSDK2\Client($client);
$cdek->setAccount('account');
$cdek->setSecure('secure');

// —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
$order = \CdekSDK2\BaseTypes\Order::create([...]);
$res = $cdek->orders()->add($order);

if ($res->hasErrors()) {
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
    // –ï—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å, –≤ –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ RequestException
    foreach ($res->getErrors() as $error) {
        //—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
    }
}
if ($res->isOk()) {
    $cdek_order = $cdek->formatResponse($res, \CdekSDK2\BaseTypes\Order::class);
    // $cdek_order->entity->uuid;
    // –ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ $res->isOk()
    // –∏ –ø—Ä–∏ —ç—Ç–æ–º –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏, —Ç–æ –∑–¥–µ—Å—å –≤—ã–±—Ä–æ—Å–∏—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ RequestException
}

// –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ
$res = $cdek->orders()->get($cdek_order->entity->uuid);
if ($res->isOk()) {
    $cdek_order = $cdek->formatResponse($res, \CdekSDK2\Dto\OrderInfo::class);
}




//–ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ñ–∏—Å–æ–≤
$res = $cdek->offices()->getFiltered(['country_code' => 'kz']);
if ($res->isOk()) {
    $pvzlist = $cdek->formatResponseList($res, \CdekSDK2\Dto\PickupPointList::class);
//    $pvzlist->items;
}
```


### –¢–µ—Å—Ç—ã
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
``` bash
$ composer test
```


### –õ–∏—Ü–µ–Ω–∑–∏—è
–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è [–ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT](LICENSE).
